<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reservaciones</title>
    <link rel="stylesheet" href="estilosReservas/reservaciones.css" />
  </head>
  <body>
    <!-- Barra de navegación -->
    <div class="barranaranja">
      <nav class="navbar">
        <!-- Logo -->
        <div class="logo">
          <a href="#">Puntarenas</a>
        </div>

        <!-- Enlaces de navegación -->
        <ul class="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#services">Services</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>

        <!-- Barra de búsqueda -->
        <div class="search-bar">
          <input type="text" placeholder="Search..." />
          <button type="submit" aria-label="Search">🔍</button>
        </div>
      </nav>
    </div>

    <!-- Encabezado del servicio -->
    <header class="header">
      <h1>Hotel Balmoral</h1>
    </header>

    <!-- Galería de imágenes -->
    <section class="image-gallery">
      <img src="hotel1.jpg" alt="Habitación del hotel" />
      <img src="hotel2.jpg" alt="Lobby del hotel" />
      <img src="hotel3.jpg" alt="Restaurante del hotel" />
    </section>

    <main class="main-content">
      <!-- Información del servicio -->
      <section class="service-info">
        <h2>Descripción</h2>
        <p>
          El Hotel Balmoral ofrece habitaciones cómodas con Wi-Fi gratuito,
          desayuno incluido y una ubicación céntrica en la ciudad.
        </p>
        <ul>
          <li>Ubicación: Centro de San José</li>
          <li>Servicios: Piscina, gimnasio, restaurante</li>
        </ul>
      </section>

      <!-- Formulario de reservación -->
      <section class="reservation-form">
        <h2>Buscar habitaciones</h2>
        <form id="search-form">
          <!-- Fecha de entrada -->
          <label for="checkin">Fecha de entrada:</label>
          <input type="date" id="checkin" name="checkin" required />

          <!-- Fecha de salida -->
          <label for="checkout">Fecha de salida:</label>
          <input type="date" id="checkout" name="checkout" required />

          <!-- Botones -->
          <button type="submit" class="search-btn">Buscar</button>
          <button type="button" id="reset-btn" class="reset-btn">
            Restablecer
          </button>
        </form>
      </section>

      <section class="room-availability">
        <h2>Habitaciones disponibles</h2>
        <table>
          <thead>
            <tr>
              <th>Tipo de habitación</th>
              <th>Número de personas</th>
              <th>Precio por noche</th>
              <th>Cantidad</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                Habitación Doble - 2 camas<br /><span
                  >2 camas dobles grandes</span
                >
              </td>
              <td>👤 x4</td>
              <td class="price" data-price="120">$120</td>
              <td>
                <div class="increment-buttons">
                  <button type="button" class="decrement">-</button>
                  <input type="text" value="0" readonly class="room-count" />
                  <button type="button" class="increment">+</button>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                Habitación con cama grande<br /><span>1 cama doble grande</span>
              </td>
              <td>👤 x2</td>
              <td class="price" data-price="100">$100</td>
              <td>
                <div class="increment-buttons">
                  <button type="button" class="decrement">-</button>
                  <input type="text" value="0" readonly class="room-count" />
                  <button type="button" class="increment">+</button>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                Habitación con cama grande, balcón y vistas al mar<br /><span
                  >1 cama doble grande</span
                >
              </td>
              <td>👤 x2</td>
              <td class="price" data-price="150">$150</td>
              <td>
                <div class="increment-buttons">
                  <button type="button" class="decrement">-</button>
                  <input type="text" value="0" readonly class="room-count" />
                  <button type="button" class="increment">+</button>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                Habitación Doble con balcón y vistas al mar - 2 camas
                individuales<br /><span>2 camas dobles grandes</span>
              </td>
              <td>👤 x4</td>
              <td class="price" data-price="180">$180</td>
              <td>
                <div class="increment-buttons">
                  <button type="button" class="decrement">-</button>
                  <input type="text" value="0" readonly class="room-count" />
                  <button type="button" class="increment">+</button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="continue-container">
          <button id="select-continue" disabled>Seleccionar y continuar</button>
        </div>
      </section>

      <!-- Reseñas y calificaciones -->
      <section class="reviews-section">
        <h2>Reseñas</h2>
        <!-- Listado de reseñas existentes -->
        <div class="reviews-list">
          <p><strong>Usuario 1:</strong> Muy buena experiencia. ★★★★★</p>
          <p><strong>Usuario 2:</strong> Excelente servicio. ★★★★☆</p>
        </div>

        <!-- Botón para habilitar la sección de dejar reseña -->
        <button id="leave-review-btn">Dejar reseña</button>

        <!-- Formulario de reseñas oculto por defecto -->
        <div id="review-form" style="display: none">
          <label for="review-text">Dejar una reseña:</label>
          <textarea
            id="review-text"
            rows="3"
            placeholder="Escribe tu reseña aquí"
          ></textarea>
          <label for="review-rating">Calificación:</label>
          <select id="review-rating">
            <option value="1">★☆☆☆☆</option>
            <option value="2">★★☆☆☆</option>
            <option value="3">★★★☆☆</option>
            <option value="4">★★★★☆</option>
            <option value="5">★★★★★</option>
          </select>
          <button id="submit-review-btn">Enviar reseña</button>
          <button id="cancel-review-btn" class="cancel-btn">Cancelar</button>
        </div>
      </section>
    </main>
  </body>

  <script>
    // Esperar a que el DOM cargue
    document.addEventListener("DOMContentLoaded", function () {
      const resetButton = document.getElementById("reset-btn");
      const checkinInput = document.getElementById("checkin");
      const checkoutInput = document.getElementById("checkout");

      // Función para restablecer las fechas
      resetButton.addEventListener("click", function () {
        checkinInput.value = ""; // Limpiar fecha de entrada
        checkoutInput.value = ""; // Limpiar fecha de salida
      });
    });

    document
      .getElementById("search-form")
      .addEventListener("submit", function (event) {
        const checkin = document.getElementById("checkin").value;
        const checkout = document.getElementById("checkout").value;

        if (!checkin || !checkout) {
          event.preventDefault(); // Detiene el envío del formulario
          alert("Por favor selecciona las fechas de entrada y salida.");
        }
      });

    //Verificar fecha de check in menor a check out

    document
      .getElementById("search-form")
      .addEventListener("submit", function (event) {
        const checkin = new Date(document.getElementById("checkin").value);
        const checkout = new Date(document.getElementById("checkout").value);

        if (checkin >= checkout) {
          event.preventDefault();
          alert("La fecha de salida debe ser posterior a la fecha de entrada.");
        }
      });
/*
    //Selectores incrementales para la cantidad de habitaciones

    document.addEventListener("DOMContentLoaded", function () {
      // Selecciona todos los contenedores de botones incrementales
      const incrementContainers =
        document.querySelectorAll(".increment-buttons");

      incrementContainers.forEach((container) => {
        const decrementBtn = container.querySelector(".decrement");
        const incrementBtn = container.querySelector(".increment");
        const countInput = container.querySelector(".room-count");

        // Evento para el botón "-"
        decrementBtn.addEventListener("click", () => {
          let currentValue = parseInt(countInput.value, 10);
          if (currentValue > 0) {
            countInput.value = currentValue - 1;
          }
        });

        // Evento para el botón "+"
        incrementBtn.addEventListener("click", () => {
          let currentValue = parseInt(countInput.value, 10);
          if (currentValue < 10) {
            // Límite máximo de 10 habitaciones
            countInput.value = currentValue + 1;
          }
        });
      });
    });

    */

    // Recoger infro de habitaciones seleccionadas

    document.addEventListener("DOMContentLoaded", function () {
      const incrementContainers =
        document.querySelectorAll(".increment-buttons");
      const continueBtn = document.getElementById("select-continue");

      // Función para verificar si al menos una habitación está seleccionada
      function checkSelection() {
        let isAnySelected = false;

        document.querySelectorAll(".room-count").forEach((input) => {
          if (parseInt(input.value, 10) > 0) {
            isAnySelected = true;
          }
        });

        // Activar/desactivar el botón
        if (isAnySelected) {
          continueBtn.disabled = false;
          continueBtn.classList.add("enabled");
        } else {
          continueBtn.disabled = true;
          continueBtn.classList.remove("enabled");
        }
      }

      // Añadir eventos a los botones "+" y "-"
      incrementContainers.forEach((container) => {
        const decrementBtn = container.querySelector(".decrement");
        const incrementBtn = container.querySelector(".increment");
        const countInput = container.querySelector(".room-count");

        decrementBtn.addEventListener("click", () => {
          let currentValue = parseInt(countInput.value, 10);
          if (currentValue > 0) {
            countInput.value = currentValue - 1;
            checkSelection();
          }
        });

        incrementBtn.addEventListener("click", () => {
          let currentValue = parseInt(countInput.value, 10);
          if (currentValue < 10) {
            countInput.value = currentValue + 1;
            checkSelection();
          }
        });
      });

      // Recoger datos al hacer clic en "Seleccionar y continuar"
      continueBtn.addEventListener("click", () => {
        const selectedRooms = [];

        document.querySelectorAll("tbody tr").forEach((row) => {
          const roomType = row.querySelector("td").innerText.trim();
          const price = row.querySelector(".price").dataset.price;
          const count = row.querySelector(".room-count").value;

          if (parseInt(count, 10) > 0) {
            selectedRooms.push({
              type: roomType,
              price: parseFloat(price),
              quantity: parseInt(count, 10),
            });
          }
        });

        // Guardar los datos en localStorage para transferirlos
        localStorage.setItem("selectedRooms", JSON.stringify(selectedRooms));

        // Redirigir a la página de pagos
        window.location.href = "Pagos.html";
      });
    });

    // Mostrar el formulario al hacer clic en "Dejar reseña"
    document
      .getElementById("leave-review-btn")
      .addEventListener("click", function () {
        document.getElementById("review-form").style.display = "block"; // Muestra el formulario
        this.style.display = "none"; // Oculta el botón "Dejar reseña"
      });

    // Ocultar el formulario al hacer clic en "Cancelar"
    document
      .getElementById("cancel-review-btn")
      .addEventListener("click", function () {
        document.getElementById("review-form").style.display = "none"; // Oculta el formulario
        document.getElementById("leave-review-btn").style.display = "block"; // Muestra el botón "Dejar reseña"
      });
  </script>
</html>
